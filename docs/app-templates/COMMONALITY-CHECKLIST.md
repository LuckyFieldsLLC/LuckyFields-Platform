# 共通化チェックリスト (Commonality Checklist)

> このチェックリストは開発者が新機能実装時に共通化の可能性を評価するためのツールです。
> 定期的にコードレビューや振り返りで使用してください。

## 新機能実装前のチェック

### Platform 既存機能確認
新しい機能を実装する前に以下を確認：

- [ ] **LuckyFields-Platform ドキュメント**を確認済み
- [ ] **既存モジュール**で類似機能がないか調査済み
- [ ] **Roadmap** で今後提供予定の機能ではないか確認済み
- [ ] **他のアプリケーション**で同様の実装がないか確認済み

### 実装方針の決定
以下の判定に基づいて実装方針を決定：

```
┌─ Platform に既存解決策あり？
│   ├─ YES → Platform モジュールを使用
│   └─ NO  ↓
│
├─ 他のアプリでも使用される可能性は？
│   ├─ HIGH → Platform への提案を検討
│   ├─ MID  → ローカル実装 + 将来的な Platform 移行を計画
│   └─ LOW  → アプリ固有実装
│
└─ 実装の複雑さは？
    ├─ 複雑（50行以上）→ Platform 提案を強く推奨
    └─ シンプル → アプリ固有実装でも可
```

## 実装中のチェック

### コード品質チェック
- [ ] **TypeScript strict mode** 対応
- [ ] **単一責任原則** に従った設計
- [ ] **テスト可能** な構造
- [ ] **適切なエラーハンドリング**
- [ ] **パフォーマンス** を考慮した実装

### 共通化可能性の評価
実装しながら以下をチェック：

- [ ] **汎用的なロジック**が含まれていないか
- [ ] **外部API連携**が発生していないか
- [ ] **データ変換処理**が複雑になっていないか
- [ ] **ビジネスルール**が他アプリでも適用されそうか
- [ ] **UIパターン**が再利用可能ではないか

## 実装完了後のレビュー

### 共通化候補の特定

#### 必須レビュー項目
以下のいずれかに該当する場合は Platform への提案を検討：

- [ ] **50行以上**の汎用的なロジック
- [ ] **外部サービス**との連携処理
- [ ] **データ変換**や**フォーマット**処理
- [ ] **バリデーション**ルール
- [ ] **認証・認可**関連の処理
- [ ] **ファイル操作**（アップロード/ダウンロード）
- [ ] **API通信**のパターン
- [ ] **エラーハンドリング**のパターン
- [ ] **設定管理**関連の処理
- [ ] **ログ出力**や**監視**関連

#### UIコンポーネントの評価
- [ ] **再利用可能**なUIコンポーネント
- [ ] **デザインシステム**に追加すべきパターン
- [ ] **アクセシビリティ**対応が必要な共通コンポーネント
- [ ] **レスポンシブ**デザインのパターン

#### React フックの評価
- [ ] **状態管理**のパターン
- [ ] **副作用**（API呼び出し等）の管理
- [ ] **カスタムロジック**の再利用
- [ ] **パフォーマンス最適化**のパターン

## Platform 提案プロセス

### 1. 提案準備
- [ ] **機能の概要**と**利用場面**を明確化
- [ ] **他アプリでの需要**を調査・確認
- [ ] **API設計案**を作成
- [ ] **実装の複雑さ**を評価

### 2. RFC (Request for Comments) 作成
以下の内容を含む提案書を作成：

```markdown
## 提案概要
- 機能名：
- 目的：
- 解決する課題：

## 使用場面
- [現在のアプリ]：
- [想定される他のアプリ]：

## 提案API
```typescript
// 提案するAPI設計
export interface ProposedOptions {
  // ...
}

export const proposedFunction = (options: ProposedOptions) => {
  // ...
};
```

## 類似機能調査
- 既存Platform機能：
- 外部ライブラリ：
- 他社事例：

## 実装見積もり
- 開発工数：
- テスト工数：
- ドキュメント工数：
```

### 3. Platform チームとの協議
- [ ] **GitHub Issue** で提案を作成
- [ ] **Slack** で事前相談
- [ ] **週次ミーティング** で議論
- [ ] **実装方針**の合意

### 4. 実装と移行
- [ ] Platform での実装完了を待機
- [ ] **新バージョン**のテストと検証
- [ ] **段階的移行**の実施
- [ ] **旧実装の削除**
- [ ] **ドキュメント更新**

## 定期レビュー（月次）

### コードベース全体の見直し
- [ ] **未使用コード**の特定と削除
- [ ] **重複実装**の発見と整理
- [ ] **Platform モジュール**の最新版確認
- [ ] **共通化候補**の再評価

### チーム内の知識共有
- [ ] **ベストプラクティス**の共有
- [ ] **Platform 活用事例**の紹介
- [ ] **共通課題**の議論
- [ ] **改善提案**の検討

## 成功指標

### 定量的指標
- **Platform モジュール使用率**: [目標: 80%以上]
- **重複コード削減**: [目標: 月次5%削減]
- **新機能開発時間**: [目標: 20%短縮]
- **バグ修正時間**: [目標: 30%短縮]

### 定性的指標
- **開発者満足度**: 定期アンケート実施
- **コード品質**: レビュー時の指摘減少
- **保守性**: 機能追加・修正の容易さ
- **一貫性**: アプリ間のパターン統一

## ツールとリソース

### 開発ツール
- **VS Code Extension**: LuckyFields snippet集
- **ESLint Rules**: Platform 使用を推奨するルール
- **Bundle Analyzer**: Platform モジュールの使用状況分析

### ドキュメント
- [LuckyFields-Platform README](../PROJECT-GUIDE.md)
- [Development Policy](../DEVELOPMENT-POLICY.md)
- [Roadmap](../ROADMAP.md)
- [AI-QA Guide](../AI-QA.md)

### コミュニケーション
- **Slack**: #luckyfields-platform
- **GitHub**: Issues and Discussions
- **Weekly Meeting**: Platform チームとの定期ミーティング

---

*Checklist version: 1.0*  
*Last updated: 2025-10-09*  
*For questions: contact Platform Team*